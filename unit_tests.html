<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Unit Tests</title>
    <script type="module">
        import test_get_set from "./tests/test_get_set.js";
        import test_get_set_json from "./tests/test_get_set_json.js";
        import test_subscriptions from "./tests/test_subscriptions.js";
        import test_actions from "./tests/test_actions.js"
        import test_simple_variable from "./tests/test_simple_variable.js"
        import test_reordering from "./tests/test_reordering.js"
        import test_api_subscription_manager from "./tests/test_api_subscription_manager.js"
        import test_map from "./tests/test_map.js"

        async function run_tests() {
            const test_sets = [test_get_set, test_get_set_json, test_subscriptions, test_actions, test_simple_variable,
                test_reordering, test_map, test_api_subscription_manager];
            // const test_sets = [{test: test_map.test_map_proxy_insert_order}];
            for (const tests of test_sets) {
                for (const [name, test_function] of Object.entries(tests)) {
                    console.log(`Testing [${name}]`)
                    try {
                        await test_function();
                        console.log(`PASSED`)
                        document.body.innerHTML += `<p style="color: green">Test [${name}] PASSED</p>`
                    } catch (e) {
                        console.error(`FAILED`)
                        document.body.innerHTML += `<p style="color: red">Test [${name}] FAILED</p>`
                        console.error(e);
                    }
                }
            }
        }

        run_tests();

    </script>
</head>
<body>

</body>
</html>